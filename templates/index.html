<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>SpotWelding – Web AI Demo</title>
  <style>
    body { font-family: sans-serif; background:#0f1115; color:#e5e7eb; margin:0; padding:24px; }
    .container { max-width: 980px; margin: 0 auto; display:grid; gap:20px; grid-template-columns: 1fr 1fr; }
    .card { background:#151922; border:1px solid #232838; border-radius:16px; padding:16px; }
    h1 { margin-top:0; font-size:24px; }
    label { display:block; font-size:12px; color:#9aa4b2; margin-bottom:6px; }
    input { width:100%; border-radius:10px; border:1px solid #2a3142; background:#0f131b; color:#e5e7eb; padding:10px 12px; margin-bottom:10px; }
    button { padding:10px 14px; border-radius:10px; border:0; background:#2563eb; color:white; cursor:pointer; }
    button.secondary { background:#374151; }
    .video-wrap { position:relative; border-radius:16px; overflow:hidden; }
    #overlay { position:absolute; left:10px; top:10px; background:rgba(0,0,0,0.55); padding:8px 10px; border-radius:10px; font-weight:600; }
    #video { width:100%; height:auto; display:block; background:#000; }
    .row { display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .full { grid-column: 1 / -1; }
    #status { font-size:12px; color:#9aa4b2; }
    footer { text-align:center; margin-top: 12px; font-size: 12px; color:#6b7280; }
  </style>
</head>
<body>
  <h1>دموی وب اپ تشخیص کیفیت نقطه‌جوش</h1>
  <div class="container">
    <div class="card">
      <div class="video-wrap">
        <div id="overlay">نتیجه: - | دقت: -</div>
        <video id="video" autoplay playsinline muted></video>
      </div>
      <div style="margin-top:10px; display:flex; gap:8px;">
        <button id="btn-capture">📸 عکس و پیش‌بینی</button>
        <button class="secondary" id="btn-stop">⏹ قطع دوربین</button>
      </div>
      <p id="status">وضعیت: در انتظار اجازه‌ی دسترسی به دوربین…</p>
      <canvas id="canvas" style="display:none;"></canvas>
    </div>

    <div class="card">
      <div class="row">
        <div><label>Pressure (PSI)</label><input id="n1" inputmode="decimal" placeholder="مثلاً 1200"></div>
        <div><label>Welding Time (ms)</label><input id="n2" inputmode="decimal" placeholder="مثلاً 250"></div>
        <div><label>Angle (Deg)</label><input id="n3" inputmode="decimal" placeholder="مثلاً 45"></div>
        <div><label>Thickness A (mm)</label><input id="n4" inputmode="decimal" placeholder="مثلاً 1.2"></div>
        <div><label>Thickness B (mm)</label><input id="n5" inputmode="decimal" placeholder="مثلاً 1.0"></div>
        <div><label>Material</label><input id="n6" inputmode="decimal" placeholder="کُد عددی ماده"></div>
        <div><label>Force (N)</label><input id="n7" inputmode="decimal" placeholder="مثلاً 3000"></div>
        <div><label>Current (A)</label><input id="n8" inputmode="decimal" placeholder="مثلاً 8000"></div>
        <div class="full"><button id="btn-predict">🚀 پیش‌بینی با همان فریم جاری</button></div>
      </div>
      <p style="margin-top:8px;">راهنما: برای استفاده روی موبایل خارج از <code>localhost</code> باید سایت شما <b>HTTPS</b> باشد تا مرورگر اجازه‌ی دوربین بدهد.</p>
    </div>
  </div>
  <footer>© Web demo – SpotWelding</footer>
  <script>
    window.MODEL_W = {{ imgw|tojson }};
    window.MODEL_H = {{ imgh|tojson }};
    window.CLASS_LABELS = {{ labels|tojson }};
  </script>
  <script src="/static/script.js"></script>
</body>
</html>